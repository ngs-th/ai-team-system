# ðŸ¤– AI Team - Spawn Mechanism Explained

## Overview

à¸£à¸°à¸šà¸š AI Team à¸¡à¸µ 2 à¹‚à¸«à¸¡à¸”à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£ "à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¹ƒà¸«à¹‰ Agent":

| Mode | à¸Šà¸·à¹ˆà¸­ | à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™ | à¹ƒà¸Šà¹‰à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆ |
|------|------|----------|-------------|
| **A** | Database Queue (Default) | à¸ªà¸£à¹‰à¸²à¸‡ task record â†’ Agent à¸£à¸±à¸šà¸‡à¸²à¸™à¸œà¹ˆà¸²à¸™ heartbeat | à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›, à¹„à¸¡à¹ˆà¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™ |
| **B** | Immediate Spawn | à¸ªà¸£à¹‰à¸²à¸‡ task record + à¹€à¸›à¸´à¸” OpenClaw session à¸—à¸±à¸™à¸—à¸µ | à¸‡à¸²à¸™à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™, à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸œà¸¥à¸—à¸±à¸™à¸—à¸µ |

---

## Mode A: Database Queue (Default) ðŸ“

```bash
./agents/spawn-agent.sh pm "Define product roadmap Q1"
# à¸«à¸£à¸·à¸­
./team_db.py task create --project PROJ-001 "Define roadmap"
```

**à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™:**
1. à¸ªà¸£à¹‰à¸²à¸‡ task record à¹ƒà¸™ `team.db`
2. Agent à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡ (status = 'idle') à¸ˆà¸°à¹€à¸«à¹‡à¸™ task à¸œà¹ˆà¸²à¸™ heartbeat
3. Agent à¸£à¸±à¸šà¸‡à¸²à¸™ (assign à¸•à¸±à¸§à¹€à¸­à¸‡) â†’ à¹€à¸£à¸´à¹ˆà¸¡à¸—à¸³à¸‡à¸²à¸™

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… à¸›à¸£à¸°à¸«à¸¢à¸±à¸” resource (à¹„à¸¡à¹ˆ spawn session à¹ƒà¸«à¸¡à¹ˆ)
- âœ… Agent à¸ˆà¸±à¸”à¸à¸²à¸£ load balancing à¹€à¸­à¸‡ (à¸£à¸±à¸šà¸‡à¸²à¸™à¸•à¸²à¸¡ capacity)
- âœ… à¸‡à¸²à¸™à¹„à¸¡à¹ˆà¸«à¸²à¸¢à¸–à¹‰à¸² system restart

**à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:**
- âŒ à¸­à¸²à¸ˆà¸¡à¸µ delay à¸–à¹‰à¸² agents à¸¢à¸¸à¹ˆà¸‡ (à¸£à¸­ heartbeat à¸–à¸±à¸”à¹„à¸›)
- âŒ à¹„à¸¡à¹ˆà¹€à¸«à¹‡à¸™ progress real-time

**à¹€à¸«à¸¡à¸²à¸°à¸ªà¸³à¸«à¸£à¸±à¸š:**
- à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸›à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™
- Background tasks
- Tasks à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸­ dependencies à¹€à¸ªà¸£à¹‡à¸ˆà¸à¹ˆà¸­à¸™

---

## Mode B: Immediate Spawn âš¡

```bash
./agents/spawn-agent.sh pm "Urgent: Fix production bug" --spawn
```

**à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™:**
1. à¸ªà¸£à¹‰à¸²à¸‡ task record à¹ƒà¸™ `team.db` (à¹€à¸«à¸¡à¸·à¸­à¸™ Mode A)
2. Spawn OpenClaw session à¹ƒà¸«à¸¡à¹ˆà¸—à¸±à¸™à¸—à¸µ
3. Session à¸™à¸±à¹‰à¸™à¹‚à¸«à¸¥à¸” agent config â†’ à¹€à¸£à¸´à¹ˆà¸¡à¸—à¸³à¸‡à¸²à¸™à¹€à¸¥à¸¢
4. Agent à¸—à¸³à¸‡à¸²à¸™à¹€à¸ªà¸£à¹‡à¸ˆ â†’ session à¸›à¸´à¸” â†’ report à¸à¸¥à¸±à¸š

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… à¹€à¸£à¸´à¹ˆà¸¡à¸—à¸³à¸‡à¸²à¸™à¸—à¸±à¸™à¸—à¸µ (à¹„à¸¡à¹ˆà¸£à¸­ heartbeat)
- âœ… à¹€à¸«à¹‡à¸™ progress real-time
- âœ… à¸‡à¸²à¸™à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™à¹„à¸”à¹‰à¸œà¸¥à¹€à¸£à¹‡à¸§

**à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:**
- âŒ à¹ƒà¸Šà¹‰ RAM/CPU à¸¡à¸²à¸à¸à¸§à¹ˆà¸² (1 session = 1 process)
- âŒ à¸¡à¸µ cost à¹€à¸žà¸´à¹ˆà¸¡ (API calls à¸•à¹ˆà¸­à¹€à¸™à¸·à¹ˆà¸­à¸‡)
- âŒ à¸–à¹‰à¸² system restart à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¸—à¸³ à¸‡à¸²à¸™à¸­à¸²à¸ˆà¸„à¹‰à¸²à¸‡

**à¹€à¸«à¸¡à¸²à¸°à¸ªà¸³à¸«à¸£à¸±à¸š:**
- Production bugs (à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™)
- User à¸£à¸­à¸­à¸¢à¸¹à¹ˆ (blocking)
- Tasks à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£ result à¸à¸¥à¸±à¸šà¸—à¸±à¸™à¸—à¸µ

---

## à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š Mission Control

**Mission Control (@pbteja1998):**
- à¹ƒà¸Šà¹‰ **isolated sessions** à¹€à¸«à¸¡à¸·à¸­à¸™ Mode B à¹à¸•à¹ˆ optimize à¸”à¹‰à¸§à¸¢:
  - Staggered heartbeats (agents à¸•à¸·à¹ˆà¸™à¸„à¸™à¸¥à¸°à¹€à¸§à¸¥à¸²)
  - Session à¸—à¸³à¸‡à¸²à¸™à¹€à¸ªà¸£à¹‡à¸ˆ â†’ terminate à¹€à¸¥à¸¢ (à¹„à¸¡à¹ˆà¸„à¹‰à¸²à¸‡)
  - Wake on demand à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µ @mention

**à¸£à¸°à¸šà¸šà¹€à¸£à¸²:**
- à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™ Mode A (Database Queue) à¹€à¸›à¹‡à¸™ default
- Mode B (Immediate Spawn) à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ flag `--spawn`

---

## Architecture à¸—à¸µà¹ˆà¹à¸™à¸°à¸™à¸³à¸ªà¸³à¸«à¸£à¸±à¸šà¸­à¸™à¸²à¸„à¸•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Task Submission                â”‚
â”‚  (spawn-agent.sh / team_db.py / Dashboard)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Priority Check    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                       â”‚
   ðŸ”´ Urgent               ðŸŸ¢ Normal
       â”‚                       â”‚
       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mode B      â”‚      â”‚  Mode A      â”‚
â”‚  Immediate   â”‚      â”‚  DB Queue    â”‚
â”‚  Spawn       â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Session â”‚      â”‚  Heartbeat   â”‚
â”‚  (Real-time) â”‚      â”‚  (Batch)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰

### Mode A (Default - DB Queue)
```bash
# à¸œà¹ˆà¸²à¸™ spawn-agent.sh
./agents/spawn-agent.sh pm "Define roadmap"

# à¸œà¹ˆà¸²à¸™ team_db.py
./team_db.py task create --project PROJ-001 "Define roadmap" --assign agent-pm-001

# à¸œà¹ˆà¸²à¸™ Dashboard
# (à¸ªà¸£à¹‰à¸²à¸‡ task à¹à¸¥à¹‰à¸§à¹€à¸¥à¸·à¸­à¸ assignee)
```

### Mode B (Immediate Spawn)
```bash
# à¸œà¹ˆà¸²à¸™ spawn-agent.sh
./agents/spawn-agent.sh pm "Urgent bug fix" --spawn

# à¸œà¹ˆà¸²à¸™ OpenClaw CLI à¹‚à¸”à¸¢à¸•à¸£à¸‡
openclaw sessions spawn \
  --agent-id "pm" \
  --model "anthropic/claude-opus-4-5" \
  --label "urgent-$(date +%s)" \
  --task "Urgent: Fix production bug..."
```

---

## à¸ªà¸£à¸¸à¸›

| à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ | à¹ƒà¸Šà¹‰ Mode à¹„à¸«à¸™ |
|-----------|-------------|
| à¸‡à¸²à¸™à¸—à¸±à¹ˆà¸§à¹„à¸› / à¹„à¸¡à¹ˆà¹€à¸£à¹ˆà¸‡ | **A** (Default) |
| à¸‡à¸²à¸™à¹€à¸£à¹ˆà¸‡ / Production bug | **B** (--spawn) |
| Background task | **A** |
| User à¸£à¸­à¸­à¸¢à¸¹à¹ˆ | **B** |
| Large project (>3 days) | **A** (à¸«à¸¥à¸²à¸¢ tasks à¸¢à¹ˆà¸­à¸¢) |
| Quick fix (<2 hours) | **B** à¸«à¸£à¸·à¸­ Solo Dev |

---

**à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:** à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™ Mode B à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ OpenClaw Gateway à¸—à¸µà¹ˆà¸£à¸±à¸™à¸­à¸¢à¸¹à¹ˆ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¡à¸µ Gateway à¸£à¸°à¸šà¸šà¸ˆà¸° fallback à¹„à¸› Mode A (à¸ªà¸£à¹‰à¸²à¸‡ task record à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸”à¸µà¸¢à¸§)
